<div class="form">
  <form
    (ngSubmit)="addItemList()"
    [formGroup]="form"
    tuiAppearance="floating"
    tuiCardLarge
    tuiForm="m"
  >
    <header tuiHeader>
      <div class="valor-total">
        <h2 tuiTitle>Valor total da compra</h2>
        <h1 tuiTitle class="valor">R$ {{valorTotal() | number:'1.2-2':'pt-BR'}}</h1>
      </div>
    </header>

    <tui-textfield>
        <label tuiLabel>Valor</label>
        <input
            formControlName="valor"
            placeholder="R$ 0,00"
            tuiTextfield
            mask="separator.2"
            prefix="R$ "
            type="tel"
        />
    </tui-textfield>
    <tui-error
        [error]="getErrorMessage$('valor') | async"
    />

    <tui-textfield>
        <label tuiLabel>Quantidade</label>
        <input
            formControlName="quantidade"
            placeholder="0"
            tuiTextfield
            mask="0*"
            type="tel"
        />
    </tui-textfield>
    <tui-error
        [error]="getErrorMessage$('quantidade') | async"
    />

    <tui-textfield>
        <label tuiLabel>Produto</label>
        <input
            formControlName="produto"
            placeholder="Leite"
            tuiTextfield
        />
    </tui-textfield>
    <tui-error
        [error]="getErrorMessage$('produto') | async"
    />
    <div class="button-box">
      <button type="submit" tuiButton>Adicionar a lista</button>
      @if(list().length > 0) {
        <button
          tuiButton
          appearance="accent"
          (click)="limpar('list')"
        >
          Limpar lista
        </button>
      }
    </div>
  </form>


  @if(list().length > 0) {
    <app-table-list
      [list]="list"
      [novoItem]="itemParaAdicionar"
      (limpar)="limpar($event)"
    ></app-table-list>
  }
</div>
